<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="k-publishing">
  <template>
    <style>
      paper-button {
        background: #2a9af2;
        color: white;
      }
    </style>
    <paper-button on-click="publish">Publish</paper-button>
    <paper-button>Save Draft</paper-button>

    <iron-ajax
     url="[[postUrl]]"
     content-type="application/json"
     body="[[computeBody(title, shortContent, content, category)]]"
     method="POST"
    ></iron-ajax>
  </template>

  <script>
   Polymer({
      is: 'k-publishing',
      properties: {
        title: String,
        shortContent: String,
        content: String,
        category: String,
        postUrl: String,
      },
      computeBody: function(title, shortContent, content, category) {
        return { title: title, shortContent: shortContent, content: content, category: category }
      },
      publish: function(e) {
        this.$$('iron-ajax').generateRequest();
      }
    });
  </script>
</dom-module>
